{% extends "base.html" %}

{% block title %}Approval system{% endblock %}

{% block content %}

<h1>Dashboard for {{ object }}</h1>

<h2>Requested by {{ object }}</h2>

<h3>Open</h3>

<table>
    <tr>
        <th> Number </th>
        <th> Vendor </th>
        <th> Business purpose </th>
        <th> Closed </th>
        <th> Link </th>
    </tr>
{% for order in requester_open_orders %}
    <tr>
        <td> {{ order.number }} </td>
        <td> {{ order.vendor }} </td>
        <td> {{ order.business_purpose }} </td>
        <td> {{ order.closed}} </td>
        <td> <a href="{% url 'order' order.id %}">link</a></td>
    </tr>
{% endfor %}
</table>

<h3>Closed</h3>

<table>
    <tr>
        <th> Number </th>
        <th> Vendor </th>
        <th> Business purpose </th>
        <th> Closed </th>
        <th> Link </th>
    </tr>
{% for order in requester_closed_orders %}
    <tr>
        <td> {{ order.number }} </td>
        <td> {{ order.vendor }} </td>
        <td> {{ order.business_purpose }} </td>
        <td> {{ order.closed}} </td>
        <td> <a href="{% url 'order' order.id %}">link</a></td>
    </tr>
{% endfor %}
</table>

<h2>Require {{ object }} approval</h2>
<h3>Open</h3>

<table>
    <tr>
        <th> Number </th>
        <th> Vendor </th>
        <th> Business purpose </th>
        <th> My decision </th>
        <th> Closed </th>
        <th> Link </th>
    </tr>
{% for order, approval in require_user_approval_open %}
    <tr>
        <td> {{ order.number }} </td>
        <td> {{ order.vendor }} </td>
        <td> {{ order.business_purpose }} </td>
        <td> {{ approval.is_approved }} </td>
        <td> {{ order.closed}} </td>
        <td> <a href="{% url 'order' order.id %}">link</a></td>
    </tr>
{% endfor %}
</table>

<h3>Closed</h3>
<table>
    <tr>
        <th> Number </th>
        <th> Vendor </th>
        <th> Business purpose </th>
        <th> My decision </th>
        <th> Closed </th>
        <th> Link </th>
    </tr>
{% for order, approval in require_user_approval_closed %}
    <tr>
        <td> {{ order.number }} </td>
        <td> {{ order.vendor }} </td>
        <td> {{ order.business_purpose }} </td>
        <td> {{ approval.is_approved }} </td>
        <td> {{ order.closed}} </td>
        <td> <a href="{% url 'order' order.id %}">link</a></td>
    </tr>
{% endfor %}
</table>

{% endblock %}
